

     <div class="ml-4">
          <ol class="relative border-l border-gray-200 dark:border-gray-700">  
            <% if @retreat.versions.count == 0 %>
                There have been no changes
            <% end %>    
            <% @retreat.versions.includes(:item).reorder('created_at DESC').each do |version| %>
             <% begin %>
               <% unless version.changeset[:id].present? %>
                <li class="mb-10 ml-6">         
                        <span class="absolute flex items-center justify-center w-6 h-6 bg-blue-100 rounded-full -left-3 ring-8 ring-white dark:ring-gray-900 dark:bg-blue-900">
                         <svg aria-hidden="true" class="w-3 h-3 text-blue-800 dark:text-blue-300" fill="currentColor" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><path fill-rule="evenodd" d="M6 2a1 1 0 00-1 1v1H4a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V6a2 2 0 00-2-2h-1V3a1 1 0 10-2 0v1H7V3a1 1 0 00-1-1zm0 5a1 1 0 000 2h8a1 1 0 100-2H6z" clip-rule="evenodd"></path></svg>
                        </span>
                         <h3 class="flex items-center mb-1 text-lg font-semibold text-gray-900 dark:text-white">

                          <%= User.find(version.whodunnit).full_name if version.whodunnit.present? %>
                        <!--  <span class="bg-blue-100 text-blue-800 text-sm font-medium mr-2 px-2.5 py-0.5 rounded dark:bg-blue-900 dark:text-blue-300 ml-3"></span>  -->
                        </h3>
                         <time class="block mb-2 text-sm font-normal leading-none text-gray-400 dark:text-gray-500"><%= version.created_at.in_time_zone(current_user.time_zone).strftime("%B #{version.created_at.day.ordinalize} at %-l:%M%P") %></time>

              <% version.changeset.each do |attribute, value| %>
                <% unless attribute == "updated_at" %>
                  <% begin %>   
                    <% if value[0].respond_to?(:strftime) %>
                     <p class="text-base font-normal text-gray-500 dark:text-gray-400">dsds
                      <%= attribute.titleize %> was changed from <%= value[0].strftime("%A %B #{value[0].day.ordinalize} %Y at %-l:%M%P") %> to <%= value[1].strftime("%A %B #{value[1].day.ordinalize} %Y at %-l:%M%P") %> by <%= version.whodunnit.present? ? User.find(version.whodunnit).full_name : "Group Leader" %></p>
                    <% else %>  
                      <% if value[1].present? %>
                 
                        <p class="text-base font-normal text-gray-500 dark:text-gray-400">
                          <%= attribute.titleize %> was changed from <%= value[0].present? ? value[0] : "Blank" %> to <%= value[1] %> by <%= version.whodunnit.present? ? User.find(version.whodunnit).full_name : "Group Leader/Circuitree" %>
                        </p> 
                      <% end %>
                    <% end %>
                
              <% rescue => ex %>
               FAIL
                <% puts ex.message %>
              <% end %>  
            <% end %>  
         <% end %> 
         </li>
       <% end %>  
    <% end %>
    <% rescue => ex %>
    FAIL2
      <% puts ex.message %>
      <% end %>
    </ol>
</div>

   